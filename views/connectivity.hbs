<div class="card">
    <div class="card-header">
        <h5 class="card-title">Wifi config</h5>
    </div>

        <div class="card-body">
            Select a Wi-Fi from the list and provide password. Press the add button, then reboot. The device should come back already connected to the Wi-Fi you provided.
            If it cannot connect, it will revert back to Wi-Fi AP mode and you can reconnect and provide a different Wi-Fi or correct the password.
        </div>

    <div class="card-body">
        <div class="form-group form-group-float">
            <label class="form-group-float-label">Wi-Fi Name</label>
            <input type="text" class="form-control" id="name" placeholder="Wi-Fi Name">
        </div>

        <div class="form-group form-group-float">
            <label class="form-group-float-label">Wi-Fi Password</label>
            <input type="password" class="form-control" id="pwd" placeholder="Wi-Fi Password">
        </div>
        <div class="text-left">
            <button type="submit" class="btn btn-primary" id="save">Add Wi-Fi <i class="icon-paperplane ml-2"></i></button>
            <button type="submit" class="btn btn-danger" id="reboot">Reboot and connect to Wi-Fi <i class="icon-paperplane ml-2"></i></button>
            <button type="submit" class="btn btn-danger" id="switchToAP">Switch to AP <i class="icon-paperplane ml-2"></i></button>
        </div>
    </div>
</div>


<div class="card">
    <div class="card-header">
        <h5 class="card-title">Connectivity</h5>
    </div>

    <!--    <div class="card-body">-->
    <!--        Modules-->
    <!--    </div>-->

    <table class="table table-bordered table-hover datatable-basic">
        <thead>
        <tr>
            <th>Select</th>
            <th>Wi-Fi name</th>
            <th>Signal</th>
            <th>Channel</th>
            <th>MAC</th>
        </tr>
        </thead>
        <tbody>


        {{#each networks}}
            <tr>
                <td><span class="badge badge-info">Select</span></td>
                <td>{{ssid}}</td>
                <td>{{rssi}}</td>
                <td>{{channel}}</td>
                <td>{{mac}}</td>
            </tr>
        {{/each}}
        </tbody>
    </table>
</div>
<script>
    $( "span" ).click(function() {
        $('#name').val($(this).parent().next().html())
    });
    $( "#save" ).click(function() {
        const name =  $('#name').val()
        const pwd =  $('#pwd').val()
        $.post( "/offline/addWifi", {name, pwd}, function( data ) {
            console.log(data)
        });
    });
    $( "#switchToAP" ).click(function() {
        $.post( "/offline/switchToAP", function( data ) {
            console.log(data)
        });
    });
</script>
